<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="reboard">

	<!-- 리스트 가져오기 -->
	<select id="getList" resultType="com.javaex.vo.ReplyBoardVo">
		<![CDATA[
			select  r.no,
			        r.user_no,
			        u.name,
			        r.title,
			        r.content,
			        r.hit,
        			to_char(r.reg_date,'yyyy-mm-dd hh24:mi') reg_date,
			        r.group_no,
			        r.order_no,
			        r.depth
			from replyboard r, users u
			where r.user_no = u.no
			order by r.no desc
		]]>
	</select>

	<!-- 게시글 가져오기 -->
	<select id="getPost" parameterType="int" resultType="com.javaex.vo.ReplyBoardVo">
		<![CDATA[
			select  r.no,
			        r.user_no,
			        u.name,
			        r.title,
			        r.content,
			        r.hit,
			        to_char(r.reg_date,'yyyy-mm-dd hh24:mi') reg_date,
			        r.group_no,
			        r.order_no,
			        r.depth
			from replyboard r, users u
			where r.user_no = u.no
			and r.no = #{no}
		]]>
	</select>
	
	<!-- 게시글 등록하기 -->
	<select id="postInsert" parameterType="com.javaex.vo.ReplyBoardVo">
		<![CDATA[
			INSERT INTO replyboard
			VALUES(seq_rBoard_no.nextval, #{user_no}, #{title}, #{content}, 0, sysdate, seq_rBoard_no.nextval, 1, 1)
		]]>
	</select>
</mapper>
